Spring

1. tomcat과 같은 WAS, 즉 servlet engine 필수
2. Spring Framework
	- server 세팅을 개발자 및 인프라 운영자가 직접 함
	- 기존 정통 웹 개발 eclipse 구조에서 library만 추가
		servlet, jsp 위치 등은 다 동일
3. SpringBoot
	- 기본적으로 tomcat 내장되어 있음
	- 단, 다른 서버 설정도 가능
	- web 개발 기능을 sts에서 html/css/js만 지원 
		: 파일 생성은 미지원
		: 마켓플레이스에서 "web developer" 플러그인 설치 필요
	- html/css/js, 이미지: 정적 파일
		: src/main/resources/static/*.html, *.css, *.js
	- jsp: 동적 파일
		: webapp/*.jsp - 일반 web jsp 개발 경로 
		: webapp/WEB-INF/*.jsp 
			- ✅ spring만 실행 가능한 구조
			- 보안을 고려한 특수 설정이었음
	- 참고
		실제 모든 web app server에서 실행되는 표준 스펙 구조
		- 제시자: 최초 servlet & jsp 개발자들
			모든 WAS 실행 구조는 동일
		context명/WEB-INF/classes
						/lib
				/*.html
				/*.jsp
				/*.css & *.js
	
4. SpringBoot에서 jsp 개발 시
	- controller는 내부적으로 servlet으로 변환되어 구동
	- 연관된 어노테이션
		@RestController
		@Controller
	- jsp 개발 위치
		src/main/webapp 폴더 직접 생성
		src/main/webapp/WEB-INF 폴더 직접 생성
		* application.properties: 설정파일에 jsp 실행 위치 꼭 등록
		* library 설정 파일
			pom.xml & build.gradle에 jsp 실행 가능한 library 세팅 필수 
			
5. 개발 구조
- build.gradle에 jsp와 jstl 사용 설정 필요
	* 의존 library들의 버전 매핑 방법
	- 권장: 설정 파일 상단에 메인 library들 버전 설정 후 추가 library들은 이름만 설정해서 버전 호환

	// JSP 렌더링 엔진 (Spring Boot가 버전을 관리하도록 버전 생략 권장)
    implementation 'org.apache.tomcat.embed:tomcat-embed-jasper'

    // JSTL (Jakarta EE 9/10 규격)
    implementation 'jakarta.servlet.jsp.jstl:jakarta.servlet.jsp.jstl-api' // 인터페이스
    implementation 'org.glassfish.web:jakarta.servlet.jsp.jstl'           // 구현체
    
6. 실행 test
	1. main 메소드를 보유한 클래스로 SpringBoot App 실행
	2. 브라우저에서 http://localhost/index.html 접속
	3. postman
	
	-----
	
	project 생성
	1단계: gradle 생성
	2단계: jsp 사용을 위한 library 추가
	3단계: build.gradle 파일 새로고침
	4단계: src/main/webapp 폴더 생성
			src/main/webapp/WEB-INF 폴더 생성
	5단계: build path 부분에서 Dynamic Web Module 선택
	6단계: 단순 jsp 개발 테스트
	

7. 코드 이해하기
- @RestController
	: 요청 로직에 부합되는 이름 방식의 매핑
	: 정보 저장 - put or post
	: 정보 검색(요청) - get
	...
	: @GetMapping
	: @PostMapping
	: 응답 구조
		- jsp 등 없어도 문자열로 직접 응답
		- 바로 JSON 포맷으로 응답
- 세션 데이터(서버 메모리에 상태값 저장)
	Servlet API
		HttpSession 변수 = request.getSession(); 생성
		변수.setAttribute("별칭", 데이터);
		자식타입 변수 = (자식타입)변수.getAttribute("별칭");
		
		HttpSession 변수 = request.getSession(); 획득
		변수.invalidate(); 세션 무효화
		변수 = null;
		
	Spring API
		- 세션에 사용될 별칭 선언
		@SessionAttributes({"별칭", "별칭2", ...})
		
		- 세션에 데이터 저장
			Model
			addAttribute("별칭", data)
		
		- 세션에 저장된 데이터 활용
			@ModelAttribute("별칭") 타입 변수명
			사용하고자 하는 로직의 메소드 parameter로 선언
		
		- 세션 자체를 무효화
			SessionStatus
			session.setComplete()

8. 주요 Spring API
- 1. ModelAndView
	Model - domain 또는 데이터 
	View - 화면, 출력, presentation
	두 기능을 보유한 spring의 주요 API
	jsp에게 이동하여 출력 위임
	
	application.properties 파일 필수 설정
	- jsp 파일 위치 등록 필수 !!!
	- 설정 전 선행 작업: library 추가 세팅
		# JSP 파일 경로 설정
		spring.mvc.view.prefix=/WEB-INF/views/
		spring.mvc.view.suffix=.jsp
		
		/WEB-INF/views/*.jsp

- 2. Model
	- @SessionAttributes()와 함께 사용되는 API
	- 주 목적: JSP에서 데이터 획득 및 활용
	- 세션 관련 시 필수로 @SessionAttributes()로 별칭 등록
		-> HttpSession처럼 사용되는 API, JSP에서 데이터 화면 출력시 ${sessionScope.별칭}
	- 선언 위치: 
		http 통신 서비스 메소드의 parameter
		객체생성은 이미 되어있는 상태로 메소드 호출
		즉 개발자가 코드로 생성하지 않음
		
- 3. SessionStatus
	- @SessionAttributes({"세션데이터 별칭"}) 등록된 별칭들의 값을 보유한 세션을 관리
	- 주로 로그아웃 로직 등에서 세션을 무효화할 때 사용
	- setComplete()로 기능(세션) 무효화
		: HttpSession의 invalidate()와 동일한 기능으로 간주

9. 주요 어노테이션
1) @Controller
	Spring MVC의 근본 뼈대 어노테이션
	Web 구동을 위해 사용하는 Servlet 화면
	오래전에 개발된 spring app에 주로 사용됨
	jsp로 webpage 이동시 권장되는 어노테이션
	
	- 내부에 구현되는 각 메소드의 반환타입
	1. ModelAndView: 요청 객체에 데이터 저장, jsp 통해서 응답하는 구조
	2. String

2) @RequestMapping(value = "url이름", method = RequestMethod.방식 )

3) @RestController
	- 응답 자체가 jsp 필요없이 json 포맷으로 직접 응답하는 구조에 적극 권장
	- json으로 응답시 client 시스템에서 UI 가공
	
	- 내부에 구현되는 각 메소드의 반환타입
	1. DTO - json 형태로 응답
	2. String - 단순 문자열
	3. List - json 배열 형태로 응답
	
4) @GetMapping("url이름") or PostMapping	
	- @RestController 기반의 클래스 내에서 처리 메소드 선언구에 사용

5) @SessionAttributes({"세션데이터 별칭"})
 	- class 선언구 윗단에 선언
 	- 별칭 등록이 안 되어 있는 경우 세션의 별칭으로 사용시 무시됨
 	- org.springframework.ui.Model API 기준으로 세션 데이터 활용
 	
6) @ModelAttribute("세션데이터 별칭")
	- @SessionAttributes로 등록된 별칭에 한해서 세션 데이터를 사용하고자 하는 메소드의 parameter로 선언
	- 해당 메소드 내에서 활용
	- (자식타입)session.getAttribute("별칭")
	